name: Deploy the backend
on:
  push:
    branches: [ main ]

jobs:
  build:
     runs-on: ubunto-latest
     steps:
       - name: Checkout the code
         uses: actions/checkout@v2

       - name: Docker login
         uses: docker/login-action@v2
         with:
            username : ${{secrets.DOCKERHUB_USERNAME}
            password : ${{secrets.DOCKERHUB_TOKEN}}

       - name: Docker build and push
         uses: docker/build-push-action@v4
         with:
           context: .
           file: ./docker/dockerfile.http
           push: true
           tags: sayan14/http:${{github.sha}}      